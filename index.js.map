{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["const API_KEY = \"48886495-377d6660b652cff1cfff8c7f1\";\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 40) {\n    const response = await fetch(`${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&page=${page}&per_page=${perPage}&image_type=photo&orientation=horizontal`);\n\n    if (!response.ok) {\n        throw new Error('Failed to fetch images');\n    }\n\n    const data = await response.json();\n    return data.hits;\n}","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.getElementById(\"gallery\");\nconst lightbox = new SimpleLightbox(\".gallery-link\");\nlightbox.refresh();\n\n\nexport function renderImages(images) {\n    const markup = images\n        .map(\n            ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n                `<a href=\"${largeImageURL}\" class=\"gallery-link gallery-item\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\">\n                    <p>‚ù§Ô∏è ${likes} | üëÅ ${views} | üí¨ ${comments} | ‚¨áÔ∏è ${downloads}</p>\n                </a>`\n        )\n        .join(\"\");\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightbox.refresh();\n}\n\n","import { fetchImages } from \"/js/pixabay-api.js\";\nimport { renderImages } from \"/js/render-function.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.getElementById(\"search-form\");\nconst input = document.getElementById(\"search-input\");\nconst loader = document.getElementById(\"loader\");\nconst gallery = document.getElementById(\"gallery\");\nconst loadMoreBtn = document.getElementById(\"load-more\");\n\nlet query = \"\";\nlet page = 1;\nconst perPage = 40;\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    query = input.value.trim();\n    page = 1;\n    gallery.innerHTML = \"\";\n    loadMoreBtn.classList.add(\"hidden\");\n\n    if (!query) {\n        iziToast.error({ title: \"Error\", message: \"Please enter a search term!\" });\n        return;\n    }\n\n    await loadImages();\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    page += 1;\n    await loadImages();\n    smoothScroll();\n});\n\nasync function loadImages() {\n    loader.classList.remove(\"hidden\");\n\n    try {\n        const images = await fetchImages(query, page, perPage);\n        if (images.length === 0 && page === 1) {\n            iziToast.warning({ title: \"No Results\", message: \"Try another keyword!\" });\n        } else {\n            renderImages(images);\n            if (images.length < perPage) {\n                loadMoreBtn.classList.add(\"hidden\");\n                iziToast.info({ title: \"End\", message: \"You've reached the end of search results.\" });\n            } else {\n                loadMoreBtn.classList.remove(\"hidden\");\n            }\n        }\n    } catch (error) {\n        iziToast.error({ title: \"Error\", message: \"Failed to load images!\" });\n    } finally {\n        loader.classList.add(\"hidden\");\n    }\n}\n\nfunction smoothScroll() {\n    const images = document.querySelectorAll(\".gallery-item\");\n    if (images.length < perPage) return;\n    const lastLoadedRow = [...images].slice(-perPage);\n    if (lastLoadedRow.length > 0) {\n        lastLoadedRow[0].scrollIntoView({\n            behavior: \"smooth\",\n            block: \"start\",\n        });\n    }\n}\n\n\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","response","gallery","lightbox","SimpleLightbox","renderImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","input","loader","loadMoreBtn","event","iziToast","loadImages","smoothScroll","lastLoadedRow"],"mappings":"wvBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC7D,MAAMC,EAAW,MAAM,MAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAAmBG,CAAK,CAAC,SAASC,CAAI,aAAaC,CAAO,0CAA0C,EAEjK,GAAI,CAACC,EAAS,GACV,MAAM,IAAI,MAAM,wBAAwB,EAI5C,OADa,MAAMA,EAAS,QAChB,IAChB,CCRA,MAAMC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAW,IAAIC,EAAe,eAAe,EACnDD,EAAS,QAAO,EAGT,SAASE,EAAaC,EAAQ,CACjC,MAAMC,EAASD,EACV,IACG,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACrE,YAAYL,CAAa;AAAA,gCACTD,CAAY,UAAUE,CAAI;AAAA,4BAC9BC,CAAK,SAASC,CAAK,SAASC,CAAQ,SAASC,CAAS;AAAA,qBAEzE,EACA,KAAK,EAAE,EAEZZ,EAAQ,mBAAmB,YAAaK,CAAM,EAE9CJ,EAAS,QAAO,CACpB,CClBA,MAAMY,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAQ,SAAS,eAAe,cAAc,EAC9CC,EAAS,SAAS,eAAe,QAAQ,EACzCf,EAAU,SAAS,eAAe,SAAS,EAC3CgB,EAAc,SAAS,eAAe,WAAW,EAEvD,IAAIpB,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAU,GAEhBe,EAAK,iBAAiB,SAAU,MAAOI,GAAU,CAO7C,GANAA,EAAM,eAAc,EACpBrB,EAAQkB,EAAM,MAAM,OACpBjB,EAAO,EACPG,EAAQ,UAAY,GACpBgB,EAAY,UAAU,IAAI,QAAQ,EAE9B,CAACpB,EAAO,CACRsB,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,6BAA6B,CAAE,EACzE,MACH,CAED,MAAMC,EAAU,CACpB,CAAC,EAEDH,EAAY,iBAAiB,QAAS,SAAY,CAC9CnB,GAAQ,EACR,MAAMsB,EAAU,EAChBC,GACJ,CAAC,EAED,eAAeD,GAAa,CACxBJ,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACA,MAAMX,EAAS,MAAMT,EAAYC,EAAOC,EAAMC,CAAO,EACjDM,EAAO,SAAW,GAAKP,IAAS,EAChCqB,EAAS,QAAQ,CAAE,MAAO,aAAc,QAAS,sBAAsB,CAAE,GAEzEf,EAAaC,CAAM,EACfA,EAAO,OAASN,GAChBkB,EAAY,UAAU,IAAI,QAAQ,EAClCE,EAAS,KAAK,CAAE,MAAO,MAAO,QAAS,2CAA2C,CAAE,GAEpFF,EAAY,UAAU,OAAO,QAAQ,EAGhD,MAAe,CACZE,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,wBAAwB,CAAE,CAC5E,QAAc,CACNH,EAAO,UAAU,IAAI,QAAQ,CAChC,CACL,CAEA,SAASK,GAAe,CACpB,MAAMhB,EAAS,SAAS,iBAAiB,eAAe,EACxD,GAAIA,EAAO,OAASN,EAAS,OAC7B,MAAMuB,EAAgB,CAAC,GAAGjB,CAAM,EAAE,MAAM,CAACN,CAAO,EAC5CuB,EAAc,OAAS,GACvBA,EAAc,CAAC,EAAE,eAAe,CAC5B,SAAU,SACV,MAAO,OACnB,CAAS,CAET"}